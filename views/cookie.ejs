<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cookie</title>
</head>
<style>
  #check.hide {
    display: none;
  }

  .hide {
    display: none;
  }
</style>

<body>
  <h1>쿠키 팔아요</h1>
  <input type="checkbox" name="check" id="check" />
  <label for="check">ALERT 하루 동안 보지 않기!</label>
</body>
<script>
  if (!document.cookie) alert("쿠키 팔아요!")

  const checkbox = document.getElementById("check")
  const label = document.querySelector("label")
  const h1 = document.querySelector("h1")
  if (document.cookie) {
    checkbox.classList.add("hide")
    label.classList.add("hide")
    h1.classList.add("hide")
  }
  checkbox.addEventListener("click", async () => {
    if (checkbox.checked === true) {
      await fetch("http://localhost:5500/cookie/cook", {
        method: "get",
        headers: {
          'content-type': 'application/json'
        },
      }).then((res) => {
        // console.log(res);
        res.json();
        checkbox.classList.add("hide")
        label.classList.add("hide")
        h1.classList.add("hide")
      }).then((err) => {
        console.log(err)
      })
    }
  })
  // checkbox.addEventListener("click", async () => {
  //   if (checkbox.checked) {
  //     const res = await fetch("http://localhost/cookie/cook", {
  //       method: "get",
  //       headers: {
  //         'content-type': 'application/json'
  //       },
  //     })
  //   }
  // })
</script>

</html>